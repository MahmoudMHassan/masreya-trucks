<%adscount = @ads.count%>
<br>
وجد <%=adscount%> نتائج <br>
<% pageads = @ads.limit(10).offset((params[:page].to_i-1)*10)%>
<%pageads.each do |a|%>
<div class = "post_wrapper">
<%=link_to a.ad.title, "/ads/#{a.id}"%><br>
<%= a.vehicle.make%> | <%=a.vehicle.model%><br>
السعر:<%= number_with_delimiter(a.vehicle.price, :delimiter => ',')%>
السنة: <%= a.vehicle.manyear%>
imported: <%= a.imported%>
     new: <%= a.new%>
     purchase: <%= a.purchase%>
<div style ="width: 400px;">
<%=a.ad.description%><br>
</div>
</div>
<%end%>
<%if adscount > 10 %>
<%if params[:page] != "1"%>
<%=link_to "↠", "/ads/search/1?utf8=✓&make=#{params[:make]}&model=#{params[:model]}&manyear=#{params[:manyear]}&country=#{params[:country]}&axles=#{params[:axles]}&gearbox=#{params[:gearbox]}&colour=#{params[:colour]}&price=#{params[:price]}&sort=#{params[:sort]}", {:style => 'color:black;'}%>
<%=link_to "→", "/ads/search/#{params[:page].to_i-1}?utf8=✓&make=#{params[:make]}&model=#{params[:model]}&manyear=#{params[:manyear]}&country=#{params[:country]}&axles=#{params[:axles]}&gearbox=#{params[:gearbox]}&colour=#{params[:colour]}&price=#{params[:price]}&sort=#{params[:sort]}", {:style => 'color:black;'}%>
<%end%>
<%i=1%>
<%count = 4%>
<%until i > 8%>
<%if (params[:page].to_i)+i-count > 0%>
<%if adscount>((params[:page].to_i)+i-count-1)*10%>
<%if i == count %>
<%=link_to "#{(params[:page].to_i)+i-count}", "/ads/search/#{params[:page].to_i+i-count}?utf8=✓&make=#{params[:make]}&model=#{params[:model]}&manyear=#{params[:manyear]}&country=#{params[:country]}&axles=#{params[:axles]}&gearbox=#{params[:gearbox]}&colour=#{params[:colour]}&price=#{params[:price]}&sort=#{params[:sort]}", {:style => 'color:black;'}%>
<%else%>
<%=link_to "#{(params[:page].to_i)+i-count}", "/ads/search/#{params[:page].to_i+i-count}?utf8=✓&make=#{params[:make]}&model=#{params[:model]}&manyear=#{params[:manyear]}&country=#{params[:country]}&axles=#{params[:axles]}&gearbox=#{params[:gearbox]}&colour=#{params[:colour]}&price=#{params[:price]}&sort=#{params[:sort]}"%>
<%end%>
<%end%>
<%else%>
<%count = count - 1%>
<%i = i - 1%>
<%end%>
<%i+=1%>
<%end%>
<%if ((params[:page].to_i)+i-count-1) < (adscount / 10.0).ceil %>
...
<%end%>
<%if (adscount > ((params[:page].to_i))*10)%>
<%=link_to "←", "/ads/search/#{params[:page].to_i+1}?utf8=✓&make=#{params[:make]}&model=#{params[:model]}&manyear=#{params[:manyear]}&country=#{params[:country]}&axles=#{params[:axles]}&gearbox=#{params[:gearbox]}&colour=#{params[:colour]}&price=#{params[:price]}&sort=#{params[:sort]}", {:style => 'color:black;'}%>
<%=link_to "↞", "/ads/search/#{(adscount / 10.0).ceil}?utf8=✓&make=#{params[:make]}&model=#{params[:model]}&manyear=#{params[:manyear]}&country=#{params[:country]}&axles=#{params[:axles]}&gearbox=#{params[:gearbox]}&colour=#{params[:colour]}&price=#{params[:price]}&sort=#{params[:sort]}", {:style => 'color:black;'}%>
<%end%>
<%end%>